!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var o,r={general:{extensionName:"sfx",extensionId:"555",chromeExtensionProtocol:"chrome-extension:"},libraries:{PubSub:{portMessageType:"PubSub",urlPattern:"https://*/*"}},services:{},models:{UserOptions:{storageKey:"UserOptions",defaults:{isUrlRewriterOn:!0}}},background:{},content:{},popup:{},options:{}},s=function(){function e(){}return e.init=function(){return chrome.runtime.onMessage.addListener(function(n){n.extensionName===r.general.extensionName&&n.extensionId===r.general.extensionId&&n.messageType===r.libraries.PubSub.portMessageType&&e.emitLocal(n.eventName,n.data)}),e.getIsContentPage()},e.getIsContentPage=function(){return location.protocol!==r.general.chromeExtensionProtocol},e.subscribe=function(n,t){e.callbacksByEvents[n]=e.callbacksByEvents[n]||[],e.callbacksByEvents[n].push(t)},e.unsubscribe=function(n,t){var o=e.callbacksByEvents[n];if(o)for(var r=0;r<o.length;r++)if(o[r]===t){o.splice(r,1);break}},e.emit=function(n,t){void 0===t&&(t={}),e.emitGlobal(n,t),e.emitLocal(n,t)},e.emitLocal=function(n,t){var o=e.callbacksByEvents[n];o&&o.forEach(function(e){e(t)})},e.emitGlobal=function(n,t){e.isContentPage||e.sendMessageToContent(n,t),e.sendMessageToExtension(n,t)},e.sendMessageToExtension=function(e,n){var t=new i(e,n);chrome.runtime.sendMessage(t)},e.sendMessageToContent=function(e,n){var t=new i(e,n);chrome.tabs.query({url:r.libraries.PubSub.urlPattern},function(e){for(var n=0;n<e.length;++n)chrome.tabs.sendMessage(e[n].id,t)})},e.callbacksByEvents={},e.isContentPage=e.init(),e}(),i=function(e,n){this.extensionName=r.general.extensionName,this.extensionId=r.general.extensionId,this.messageType=r.libraries.PubSub.portMessageType,this.eventName=e,this.data=n};!function(e){e.onUserOptionsUpdate="onUserOptionsUpdate"}(o||(o={}));var a=r.models.UserOptions.storageKey,c=r.models.UserOptions.defaults,u=function(e){void 0===e&&(e=c.isUrlRewriterOn),this.__key__=a,this.isUrlRewriterOn=e},l=function(){function e(){}return e.sync=function(n){e.get(n,function(n){e.set(n)})},e.get=function(e,n){chrome.storage.local.get(e.__key__,function(t){var o=t[e.__key__],r=Object.assign({},e);if(void 0!==o)for(var s in r)void 0!==o[s]&&(r[s]=o[s]);n(r)})},e.set=function(e){var n;chrome.storage.local.set(((n={})[e.__key__]=e,n))},e}();l.sync(new u),s.subscribe(o.onUserOptionsUpdate,function(e){l.set(e),console.log(e)}),l.get(new u,function(e){console.log(e)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy9hcHAuY29uZmlnLnRzIiwid2VicGFjazovLy8uL3NyYy9jb25maWcvRXZlbnROYW1lcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGlicmFyaWVzL1B1YlN1Yi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1VzZXJPcHRpb25zLnRzIiwid2VicGFjazovLy8uL3NyYy9zZXJ2aWNlcy9TdG9yYWdlU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmFja2dyb3VuZC9iYWNrZ3JvdW5kLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiRXZlbnROYW1lcyIsImFwcENvbmZpZyIsImdlbmVyYWwiLCJleHRlbnNpb25OYW1lIiwiZXh0ZW5zaW9uSWQiLCJjaHJvbWVFeHRlbnNpb25Qcm90b2NvbCIsImxpYnJhcmllcyIsIlB1YlN1YiIsInBvcnRNZXNzYWdlVHlwZSIsInVybFBhdHRlcm4iLCJzZXJ2aWNlcyIsIm1vZGVscyIsIlVzZXJPcHRpb25zIiwic3RvcmFnZUtleSIsImRlZmF1bHRzIiwiaXNVcmxSZXdyaXRlck9uIiwiYmFja2dyb3VuZCIsImNvbnRlbnQiLCJwb3B1cCIsIm9wdGlvbnMiLCJpbml0IiwiY2hyb21lIiwicnVudGltZSIsIm9uTWVzc2FnZSIsImFkZExpc3RlbmVyIiwibWVzc2FnZSIsIm1lc3NhZ2VUeXBlIiwiZW1pdExvY2FsIiwiZXZlbnROYW1lIiwiZGF0YSIsImdldElzQ29udGVudFBhZ2UiLCJsb2NhdGlvbiIsInByb3RvY29sIiwic3Vic2NyaWJlIiwiY2FsbGJhY2siLCJjYWxsYmFja3NCeUV2ZW50cyIsInB1c2giLCJ1bnN1YnNjcmliZSIsImV2ZW50Q2FsbGJhY2tzIiwibGVuZ3RoIiwic3BsaWNlIiwiZW1pdCIsImVtaXRHbG9iYWwiLCJmb3JFYWNoIiwiaXNDb250ZW50UGFnZSIsInNlbmRNZXNzYWdlVG9Db250ZW50Iiwic2VuZE1lc3NhZ2VUb0V4dGVuc2lvbiIsInNlbmRNZXNzYWdlIiwidGFicyIsInF1ZXJ5IiwidXJsIiwiaWQiLCJ0aGlzIiwiX19rZXlfXyIsInN5bmMiLCJtb2RlbCIsIlN0b3JhZ2VTZXJ2aWNlIiwidXBkYXRlZE1vZGVsIiwic2V0Iiwic3RvcmFnZSIsImxvY2FsIiwicmVzdWx0Iiwic3RvcmVkTW9kZWwiLCJhc3NpZ24iLCJ1bmRlZmluZWQiLCJvblVzZXJPcHRpb25zVXBkYXRlIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xD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QUFTQyxpQkFIekMsS0FBQXNDLFFBQWtCOUQsRUFJdkI2RCxLQUFLckMsZ0JBQWtCQSxHQ1QzQixhQUNFLGNBK0JGLE9BN0JnQixFQUFBdUMsS0FBZCxTQUF3Q0MsR0FDdENDLEVBQWUzRSxJQUFPMEUsRUFBTyxTQUFDRSxHQUM1QkQsRUFBZUUsSUFBT0QsTUFJWixFQUFBNUUsSUFBZCxTQUNFMEUsRUFDQXJCLEdBRUFiLE9BQU9zQyxRQUFRQyxNQUFNL0UsSUFBSTBFLEVBQU1GLFFBQVMsU0FBQVEsR0FDdEMsSUFBTUMsRUFBaUJELEVBQU9OLEVBQU1GLFNBQzlCSSxFQUFrQi9FLE9BQU9xRixPQUFPLEdBQUlSLEdBRTFDLFFBQW9CUyxJQUFoQkYsRUFDRixJQUFLLElBQUluRSxLQUFZOEQsT0FDV08sSUFBMUJGLEVBQVluRSxLQUNkOEQsRUFBYTlELEdBQVltRSxFQUFZbkUsSUFLM0N1QyxFQUFTdUIsTUFJQyxFQUFBQyxJQUFkLFNBQXVDSCxHLE1BQ3JDbEMsT0FBT3NDLFFBQVFDLE1BQU1GLE1BQUcsTUFBSUgsRUFBTUYsU0FBVUUsRUFBSyxLQUVyRCxFQWhDQSxHQ0dBQyxFQUFlRixLQUFrQixJQUFJMUMsR0FFckMsRUFBT3FCLFVBQVVqQyxFQUFXaUUsb0JBRTVCLFNBQTZCOUMsR0FDM0JxQyxFQUFlRSxJQUFpQnZDLEdBQ2hDK0MsUUFBUUMsSUFBSWhELEtBR2RxQyxFQUFlM0UsSUFBaUIsSUFBSStCLEVBQWUsU0FBQ08sR0FDbEQrQyxRQUFRQyxJQUFJaEQiLCJmaWxlIjoiYmFja2dyb3VuZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8qXHJcbiAgVGhpbmsgb2YgdGhpcyBmaWxlIGFzIGFraW4gdG8gdGhlIHdlYi5jb25maWcgZmlsZVxyXG4gIHVzZWQgYnkgSUlTIHdlYiBhcHBsaWNhdGlvbnMuIFdlIHNob3VsZCBzdG9yZSBhcHBsaWNhdGlvblxyXG4gIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MgaGVyZSwgYW5kIHRoZW4gcmVmZXJlbmNlIHRoaXNcclxuICBvYmplY3QgZnJvbSBvdXIgc2NyaXB0cy4gSWYgYW55IGNoYW5nZXMgbmVlZCB0byBiZSBtYWRlXHJcbiAgdG8gdGhlc2Ugc2V0dGluZ3MgaW4gdGhlIGZ1dHVyZSwgd2Ugc2hvdWxkIG9ubHkgbmVlZCB0byBjaGFuZ2VcclxuICBpdCBoZXJlLlxyXG4qL1xyXG5cclxuZXhwb3J0IGNvbnN0IGFwcENvbmZpZyA9IHtcclxuICBnZW5lcmFsOiB7XHJcbiAgICBleHRlbnNpb25OYW1lOiAnc2Z4JyxcclxuICAgIGV4dGVuc2lvbklkOiAnNTU1JyxcclxuICAgIGNocm9tZUV4dGVuc2lvblByb3RvY29sOiAnY2hyb21lLWV4dGVuc2lvbjonXHJcbiAgfSxcclxuICBsaWJyYXJpZXM6IHtcclxuICAgIFB1YlN1Yjoge1xyXG4gICAgICBwb3J0TWVzc2FnZVR5cGU6ICdQdWJTdWInLFxyXG4gICAgICB1cmxQYXR0ZXJuOiAnaHR0cHM6Ly8qLyonXHJcbiAgICB9XHJcbiAgfSxcclxuICBzZXJ2aWNlczoge30sXHJcbiAgbW9kZWxzOiB7XHJcbiAgICBVc2VyT3B0aW9uczoge1xyXG4gICAgICBzdG9yYWdlS2V5OiAnVXNlck9wdGlvbnMnLFxyXG4gICAgICBkZWZhdWx0czoge1xyXG4gICAgICAgIGlzVXJsUmV3cml0ZXJPbjogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBiYWNrZ3JvdW5kOiB7fSxcclxuICBjb250ZW50OiB7fSxcclxuICBwb3B1cDoge30sXHJcbiAgb3B0aW9uczoge31cclxufTtcclxuIiwiLypcclxuICBBbnkgZXZlbnRzIHNlbnQgdGhyb3VnaCB0aGUgUHViU3ViIGNsYXNzIHNob3VsZCB1c2VcclxuICB1c2UgdGhlIEV2ZW50TmFtZXMgZW51bSBpbnN0ZWFkIG9mIG1hbnVhbGx5IHR5cGluZ1xyXG4gIGluIHRoZSBldmVudCBuYW1lIHN0cmluZy5cclxuXHJcbiAgVGhpcyBzaG91bGQga2VlcCB1cyBmcm9tIGNyZWF0aW5nIHR5cG9zIGFuZCBob3BlZnVsbHksXHJcbiAgbWFrZSBpdCBlYXNpZXIgdG8gbWFpbnRhaW4uXHJcblxyXG4gIFdlIHNob3VsZCBhbHNvIHRyeSB0byBrZWVwIHRoZSBldmVudCBkYXRhIHNlbnQgd2l0aCBQdWJTdWJcclxuICBjb25zaXN0ZW50IHBlciBldmVudC5cclxuKi9cclxuXHJcbmV4cG9ydCBlbnVtIEV2ZW50TmFtZXMge1xyXG4gIG9uVXNlck9wdGlvbnNVcGRhdGUgPSAnb25Vc2VyT3B0aW9uc1VwZGF0ZSdcclxufVxyXG4iLCIvKlxyXG5UaGlzIHBzdWVkby1zdGF0aWMgY2xhc3MgZXhwb3NlcyB0aGUgZm9sbG93aW5nIG1ldGhvZHM6XHJcbiAgXHJcbiAgLS0gIHN1YnNjcmliZShldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IGNhbGxiYWNrKTogdm9pZFxyXG5cclxuICAgICAgICBBbGxvd3MgdGhlIHVzZXIgdG8gc3ViY3NyaWJlIHRvIGV2ZW50cyB0aGF0XHJcbiAgICAgICAgYXJlIGVtaXR0ZWQgbG9jYWxseSBmcm9tIHRoZSBjYWxsaW5nIHNjcmlwdCwgb3JcclxuICAgICAgICBlbWl0dGVkIGZyb20gYSBiYWNrZ3JvdW5kLCBjb250ZW50LCBwb3B1cCwgb3Igb3B0aW9uc1xyXG4gICAgICAgIHBhZ2Ugc2NyaXB0LlxyXG5cclxuICAtLSAgdW5zdWJzY3JpYmUoZXZlbnROYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBjYWxsYmFjayk6IHZvaWRcclxuXHJcbiAgICAgICAgQWxsb3dzIHRoZSB1c2VyIHRvIHVuc3ViY3JpYmUgZnJvbSBhbiBldmVudCB0aGV5IHdlcmVcclxuICAgICAgICBwcmV2aW91c2x5IHN1YnNjcmliZSB0bywgYnkgcHJvdmlkaW5nIHRoZSBldmVudCBuYW1lIGFuZCBcclxuICAgICAgICBhIHJlZmVyZW5jZSB0byB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gb3JpZ2luYWxseSB1c2VkIHRvXHJcbiAgICAgICAgc3Vic2NyaWJlIHRvIHRoZSBldmVudC5cclxuXHJcbiAgLS0gIGVtaXQoZXZlbnROYW1lOiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWRcclxuXHJcbiAgICAgICAgQWxsb3dzIHRoZSB1c2VyIHRvIGVtaXQgZXZlbnQuIFRoZSBldmVudCB3aWxsIGJlIHNlbnRcclxuICAgICAgICB0byBhbGwgc3Vic2NyaWJlcnMsIGJvdGggbG9jYWxseSB3aXRoaW4gdGhlIGNhbGxpbmdcclxuICAgICAgICBzY3JpcCwgYXMgd2VsbCBhcyBnbG9iYWxseSwgdG8gYW55IG90aGVyIHNjcmlwdHMgc3Vic2NyaWJlZFxyXG4gICAgICAgIHRvIHRoZSBldmVudCB0aHJvdWdoIHRoaXMgUHViU3ViIGNsYXNzLlxyXG4qL1xyXG5cclxuaW1wb3J0IHsgYXBwQ29uZmlnIH0gZnJvbSAnLi4vY29uZmlnL2FwcC5jb25maWcnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFB1YlN1YiB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgY2FsbGJhY2tzQnlFdmVudHM6IHsgW2V2ZW50TmFtZTogc3RyaW5nXTogY2FsbGJhY2tbXSB9ID0ge307XHJcbiAgcHJpdmF0ZSBzdGF0aWMgaXNDb250ZW50UGFnZTogYm9vbGVhbiA9IFB1YlN1Yi5pbml0KCk7XHJcblxyXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBpbml0KCk6IGJvb2xlYW4ge1xyXG4gICAgY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKChtZXNzYWdlOiBQdWJTdWJNZXNzYWdlKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBtZXNzYWdlLmV4dGVuc2lvbk5hbWUgIT09IGFwcENvbmZpZy5nZW5lcmFsLmV4dGVuc2lvbk5hbWUgfHxcclxuICAgICAgICBtZXNzYWdlLmV4dGVuc2lvbklkICE9PSBhcHBDb25maWcuZ2VuZXJhbC5leHRlbnNpb25JZCB8fFxyXG4gICAgICAgIG1lc3NhZ2UubWVzc2FnZVR5cGUgIT09IGFwcENvbmZpZy5saWJyYXJpZXMuUHViU3ViLnBvcnRNZXNzYWdlVHlwZVxyXG4gICAgICApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIFB1YlN1Yi5lbWl0TG9jYWwobWVzc2FnZS5ldmVudE5hbWUsIG1lc3NhZ2UuZGF0YSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gUHViU3ViLmdldElzQ29udGVudFBhZ2UoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIGdldElzQ29udGVudFBhZ2UoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wgIT09IGFwcENvbmZpZy5nZW5lcmFsLmNocm9tZUV4dGVuc2lvblByb3RvY29sO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBzdWJzY3JpYmUoZXZlbnROYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBjYWxsYmFjayk6IHZvaWQge1xyXG4gICAgUHViU3ViLmNhbGxiYWNrc0J5RXZlbnRzW2V2ZW50TmFtZV0gPVxyXG4gICAgICBQdWJTdWIuY2FsbGJhY2tzQnlFdmVudHNbZXZlbnROYW1lXSB8fCBbXTtcclxuICAgIFB1YlN1Yi5jYWxsYmFja3NCeUV2ZW50c1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyB1bnN1YnNjcmliZShldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IGNhbGxiYWNrKTogdm9pZCB7XHJcbiAgICBjb25zdCBldmVudENhbGxiYWNrcyA9IFB1YlN1Yi5jYWxsYmFja3NCeUV2ZW50c1tldmVudE5hbWVdO1xyXG5cclxuICAgIGlmICghZXZlbnRDYWxsYmFja3MpIHJldHVybjtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50Q2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChldmVudENhbGxiYWNrc1tpXSA9PT0gY2FsbGJhY2spIHtcclxuICAgICAgICBldmVudENhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZW1pdChldmVudE5hbWU6IHN0cmluZywgZGF0YTogYW55ID0ge30pOiB2b2lkIHtcclxuICAgIFB1YlN1Yi5lbWl0R2xvYmFsKGV2ZW50TmFtZSwgZGF0YSk7XHJcbiAgICBQdWJTdWIuZW1pdExvY2FsKGV2ZW50TmFtZSwgZGF0YSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBlbWl0TG9jYWwoZXZlbnROYW1lOiBzdHJpbmcsIGRhdGE6IGFueSkge1xyXG4gICAgY29uc3QgZXZlbnRDYWxsYmFja3MgPSBQdWJTdWIuY2FsbGJhY2tzQnlFdmVudHNbZXZlbnROYW1lXTtcclxuXHJcbiAgICBpZiAoIWV2ZW50Q2FsbGJhY2tzKSByZXR1cm47XHJcblxyXG4gICAgZXZlbnRDYWxsYmFja3MuZm9yRWFjaCgoY2FsbGJhY2s6IGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgIGNhbGxiYWNrKGRhdGEpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBlbWl0R2xvYmFsKGV2ZW50TmFtZTogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcclxuICAgIGlmICghUHViU3ViLmlzQ29udGVudFBhZ2UpIHtcclxuICAgICAgUHViU3ViLnNlbmRNZXNzYWdlVG9Db250ZW50KGV2ZW50TmFtZSwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgUHViU3ViLnNlbmRNZXNzYWdlVG9FeHRlbnNpb24oZXZlbnROYW1lLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIHNlbmRNZXNzYWdlVG9FeHRlbnNpb24oZXZlbnROYW1lOiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IG5ldyBQdWJTdWJNZXNzYWdlKGV2ZW50TmFtZSwgZGF0YSk7XHJcbiAgICBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZShtZXNzYWdlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIHNlbmRNZXNzYWdlVG9Db250ZW50KGV2ZW50TmFtZTogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgUHViU3ViTWVzc2FnZShldmVudE5hbWUsIGRhdGEpO1xyXG5cclxuICAgIGNocm9tZS50YWJzLnF1ZXJ5KHsgdXJsOiBhcHBDb25maWcubGlicmFyaWVzLlB1YlN1Yi51cmxQYXR0ZXJuIH0sIHRhYnMgPT4ge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYnMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBjaHJvbWUudGFicy5zZW5kTWVzc2FnZSh0YWJzW2ldLmlkLCBtZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG50eXBlIGNhbGxiYWNrID0gKGRhdGE6IGFueSkgPT4gYW55O1xyXG5cclxuY2xhc3MgUHViU3ViTWVzc2FnZSB7XHJcbiAgcHVibGljIGV4dGVuc2lvbk5hbWU6IHN0cmluZztcclxuICBwdWJsaWMgZXh0ZW5zaW9uSWQ6IHN0cmluZztcclxuICBwdWJsaWMgbWVzc2FnZVR5cGU6IHN0cmluZztcclxuICBwdWJsaWMgZXZlbnROYW1lOiBzdHJpbmc7XHJcbiAgcHVibGljIGRhdGE6IGFueTtcclxuXHJcbiAgY29uc3RydWN0b3IoZXZlbnROYW1lOiBzdHJpbmcsIGRhdGE6IGFueSkge1xyXG4gICAgdGhpcy5leHRlbnNpb25OYW1lID0gYXBwQ29uZmlnLmdlbmVyYWwuZXh0ZW5zaW9uTmFtZTtcclxuICAgIHRoaXMuZXh0ZW5zaW9uSWQgPSBhcHBDb25maWcuZ2VuZXJhbC5leHRlbnNpb25JZDtcclxuICAgIHRoaXMubWVzc2FnZVR5cGUgPSBhcHBDb25maWcubGlicmFyaWVzLlB1YlN1Yi5wb3J0TWVzc2FnZVR5cGU7XHJcbiAgICB0aGlzLmV2ZW50TmFtZSA9IGV2ZW50TmFtZTtcclxuICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGFwcENvbmZpZyB9IGZyb20gJy4uL2NvbmZpZy9hcHAuY29uZmlnJztcclxuaW1wb3J0IHsgSVN0b3JhYmxlIH0gZnJvbSAnLi4vc2VydmljZXMvSVN0b3JhYmxlJztcclxuXHJcbmNvbnN0IGtleSA9IGFwcENvbmZpZy5tb2RlbHMuVXNlck9wdGlvbnMuc3RvcmFnZUtleTtcclxuY29uc3QgZGVmYXVsdHMgPSBhcHBDb25maWcubW9kZWxzLlVzZXJPcHRpb25zLmRlZmF1bHRzO1xyXG5cclxuZXhwb3J0IGNsYXNzIFVzZXJPcHRpb25zIGltcGxlbWVudHMgSVN0b3JhYmxlIHtcclxuICBwdWJsaWMgX19rZXlfXzogc3RyaW5nID0ga2V5O1xyXG4gIHB1YmxpYyBpc1VybFJld3JpdGVyT246IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKGlzVXJsUmV3cml0ZXJPbjogYm9vbGVhbiA9IGRlZmF1bHRzLmlzVXJsUmV3cml0ZXJPbikge1xyXG4gICAgdGhpcy5pc1VybFJld3JpdGVyT24gPSBpc1VybFJld3JpdGVyT247XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElTdG9yYWJsZSB9IGZyb20gJy4vSVN0b3JhYmxlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTdG9yYWdlU2VydmljZSB7XHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgc3luYzxUIGV4dGVuZHMgSVN0b3JhYmxlPihtb2RlbDogVCk6IHZvaWQge1xyXG4gICAgU3RvcmFnZVNlcnZpY2UuZ2V0PFQ+KG1vZGVsLCAodXBkYXRlZE1vZGVsOiBUKSA9PiB7XHJcbiAgICAgIFN0b3JhZ2VTZXJ2aWNlLnNldDxUPih1cGRhdGVkTW9kZWwpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldDxUIGV4dGVuZHMgSVN0b3JhYmxlPihcclxuICAgIG1vZGVsOiBULFxyXG4gICAgY2FsbGJhY2s6IGNhbGxiYWNrPFQ+XHJcbiAgKTogdm9pZCB7XHJcbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQobW9kZWwuX19rZXlfXywgcmVzdWx0ID0+IHtcclxuICAgICAgY29uc3Qgc3RvcmVkTW9kZWw6IFQgPSByZXN1bHRbbW9kZWwuX19rZXlfX10gYXMgVDtcclxuICAgICAgY29uc3QgdXBkYXRlZE1vZGVsOiBUID0gT2JqZWN0LmFzc2lnbih7fSwgbW9kZWwpIGFzIFQ7XHJcblxyXG4gICAgICBpZiAoc3RvcmVkTW9kZWwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGZvciAobGV0IHByb3BlcnR5IGluIHVwZGF0ZWRNb2RlbCkge1xyXG4gICAgICAgICAgaWYgKHN0b3JlZE1vZGVsW3Byb3BlcnR5XSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZWRNb2RlbFtwcm9wZXJ0eV0gPSBzdG9yZWRNb2RlbFtwcm9wZXJ0eV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjYWxsYmFjayh1cGRhdGVkTW9kZWwpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIHNldDxUIGV4dGVuZHMgSVN0b3JhYmxlPihtb2RlbDogVCk6IHZvaWQge1xyXG4gICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgW21vZGVsLl9fa2V5X19dOiBtb2RlbCB9KTtcclxuICB9XHJcbn1cclxuXHJcbnR5cGUgY2FsbGJhY2s8VD4gPSAodXBkYXRlZE1vZGVsOiBUKSA9PiB2b2lkO1xyXG4iLCJpbXBvcnQgeyBQdWJTdWIgfSBmcm9tICcuLi9saWJyYXJpZXMvUHViU3ViJztcclxuaW1wb3J0IHsgRXZlbnROYW1lcyB9IGZyb20gJy4uL2NvbmZpZy9FdmVudE5hbWVzJztcclxuaW1wb3J0IHsgVXNlck9wdGlvbnMgfSBmcm9tICcuLi9tb2RlbHMvVXNlck9wdGlvbnMnO1xyXG5pbXBvcnQgeyBTdG9yYWdlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL1N0b3JhZ2VTZXJ2aWNlJztcclxuXHJcblN0b3JhZ2VTZXJ2aWNlLnN5bmM8VXNlck9wdGlvbnM+KG5ldyBVc2VyT3B0aW9ucygpKTtcclxuXHJcblB1YlN1Yi5zdWJzY3JpYmUoRXZlbnROYW1lcy5vblVzZXJPcHRpb25zVXBkYXRlLCBvblVzZXJPcHRpb25zVXBkYXRlKTtcclxuXHJcbmZ1bmN0aW9uIG9uVXNlck9wdGlvbnNVcGRhdGUob3B0aW9uczogVXNlck9wdGlvbnMpOiB2b2lkIHtcclxuICBTdG9yYWdlU2VydmljZS5zZXQ8VXNlck9wdGlvbnM+KG9wdGlvbnMpO1xyXG4gIGNvbnNvbGUubG9nKG9wdGlvbnMpO1xyXG59XHJcblxyXG5TdG9yYWdlU2VydmljZS5nZXQ8VXNlck9wdGlvbnM+KG5ldyBVc2VyT3B0aW9ucygpLCAob3B0aW9uczogVXNlck9wdGlvbnMpID0+IHtcclxuICBjb25zb2xlLmxvZyhvcHRpb25zKTtcclxufSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=