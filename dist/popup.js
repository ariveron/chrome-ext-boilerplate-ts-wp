!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var o,r={general:{extensionName:"sfx",extensionId:"555",chromeExtensionProtocol:"chrome-extension:"},libraries:{PubSub:{portMessageType:"PubSub",urlPattern:"https://*/*"}},services:{},models:{UserOptions:{storageKey:"UserOptions",defaults:{isUrlRewriterOn:!0}}},background:{},content:{},popup:{},options:{}},i=function(){function e(){}return e.init=function(){return chrome.runtime.onMessage.addListener(function(n){n.extensionName===r.general.extensionName&&n.extensionId===r.general.extensionId&&n.messageType===r.libraries.PubSub.portMessageType&&e.emitLocal(n.eventName,n.data)}),e.getIsContentPage()},e.getIsContentPage=function(){return location.protocol!==r.general.chromeExtensionProtocol},e.subscribe=function(n,t){e.callbacksByEvents[n]=e.callbacksByEvents[n]||[],e.callbacksByEvents[n].push(t)},e.unsubscribe=function(n,t){var o=e.callbacksByEvents[n];if(o)for(var r=0;r<o.length;r++)if(o[r]===t){o.splice(r,1);break}},e.emit=function(n,t){void 0===t&&(t={}),e.emitGlobal(n,t),e.emitLocal(n,t)},e.emitLocal=function(n,t){var o=e.callbacksByEvents[n];o&&o.forEach(function(e){e(t)})},e.emitGlobal=function(n,t){e.isContentPage||e.sendMessageToContent(n,t),e.sendMessageToExtension(n,t)},e.sendMessageToExtension=function(e,n){var t=new s(e,n);chrome.runtime.sendMessage(t)},e.sendMessageToContent=function(e,n){var t=new s(e,n);chrome.tabs.query({url:r.libraries.PubSub.urlPattern},function(e){for(var n=0;n<e.length;++n)chrome.tabs.sendMessage(e[n].id,t)})},e.callbacksByEvents={},e.isContentPage=e.init(),e}(),s=function(e,n){this.extensionName=r.general.extensionName,this.extensionId=r.general.extensionId,this.messageType=r.libraries.PubSub.portMessageType,this.eventName=e,this.data=n};!function(e){e.onUserOptionsUpdate="onUserOptionsUpdate"}(o||(o={}));var a=r.models.UserOptions.storageKey,c=r.models.UserOptions.defaults,u=function(e){void 0===e&&(e=c.isUrlRewriterOn),this.__key__=a,this.isUrlRewriterOn=e},l=function(){function e(){}return e.sync=function(n){e.get(n,function(n){e.set(n)})},e.get=function(e,n){chrome.storage.local.get(e.__key__,function(t){var o=t[e.__key__],r=Object.assign({},e);if(void 0!==o)for(var i in r)void 0!==o[i]&&(r[i]=o[i]);n(r)})},e.set=function(e){var n;chrome.storage.local.set(((n={})[e.__key__]=e,n))},e}(),f=document.getElementById("is-url-rewriter-on");l.get(new u,function(e){f.checked=e.isUrlRewriterOn}),f.addEventListener("click",function(e){l.get(new u,function(n){n.isUrlRewriterOn=e.target.checked,i.emit(o.onUserOptionsUpdate,n)})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy9hcHAuY29uZmlnLnRzIiwid2VicGFjazovLy8uL3NyYy9jb25maWcvRXZlbnROYW1lcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGlicmFyaWVzL1B1YlN1Yi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1VzZXJPcHRpb25zLnRzIiwid2VicGFjazovLy8uL3NyYy9zZXJ2aWNlcy9TdG9yYWdlU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcG9wdXAvcG9wdXAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy9kb20uY29uZmlnLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiRXZlbnROYW1lcyIsImFwcENvbmZpZyIsImdlbmVyYWwiLCJleHRlbnNpb25OYW1lIiwiZXh0ZW5zaW9uSWQiLCJjaHJvbWVFeHRlbnNpb25Qcm90b2NvbCIsImxpYnJhcmllcyIsIlB1YlN1YiIsInBvcnRNZXNzYWdlVHlwZSIsInVybFBhdHRlcm4iLCJzZXJ2aWNlcyIsIm1vZGVscyIsIlVzZXJPcHRpb25zIiwic3RvcmFnZUtleSIsImRlZmF1bHRzIiwiaXNVcmxSZXdyaXRlck9uIiwiYmFja2dyb3VuZCIsImNvbnRlbnQiLCJwb3B1cCIsIm9wdGlvbnMiLCJpbml0IiwiY2hyb21lIiwicnVudGltZSIsIm9uTWVzc2FnZSIsImFkZExpc3RlbmVyIiwibWVzc2FnZSIsIm1lc3NhZ2VUeXBlIiwiZW1pdExvY2FsIiwiZXZlbnROYW1lIiwiZGF0YSIsImdldElzQ29udGVudFBhZ2UiLCJsb2NhdGlvbiIsInByb3RvY29sIiwic3Vic2NyaWJlIiwiY2FsbGJhY2siLCJjYWxsYmFja3NCeUV2ZW50cyIsInB1c2giLCJ1bnN1YnNjcmliZSIsImV2ZW50Q2FsbGJhY2tzIiwibGVuZ3RoIiwic3BsaWNlIiwiZW1pdCIsImVtaXRHbG9iYWwiLCJmb3JFYWNoIiwiaXNDb250ZW50UGFnZSIsInNlbmRNZXNzYWdlVG9Db250ZW50Iiwic2VuZE1lc3NhZ2VUb0V4dGVuc2lvbiIsInNlbmRNZXNzYWdlIiwidGFicyIsInF1ZXJ5IiwidXJsIiwiaWQiLCJ0aGlzIiwiX19rZXlfXyIsInN5bmMiLCJtb2RlbCIsIlN0b3JhZ2VTZXJ2aWNlIiwidXBkYXRlZE1vZGVsIiwic2V0Iiwic3RvcmFnZSIsImxvY2FsIiwicmVzdWx0Iiwic3RvcmVkTW9kZWwiLCJhc3NpZ24iLCJ1bmRlZmluZWQiLCJpc1VybFJld3JpdGVyVG9nZ2xlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNoZWNrZWQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXYiLCJ0YXJnZXQiLCJvblVzZXJPcHRpb25zVXBkYXRlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0Qs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QUFVLEtFVHRCLElBQU1ULEVBQU1VLEVBQVVVLE9BQU9DLFlBQVlDLFdBQ25DQyxFQUFXYixFQUFVVSxPQUFPQyxZQUFZRSxTQUU5QyxFQUlFLFNBQVlDLFFBQUEsSUFBQUEsTUFBMkJELEVBQVNDLGlCQUh6QyxLQUFBc0MsUUFBa0I5RCxFQUl2QjZELEtBQUtyQyxnQkFBa0JBLEdDVDNCLGFBQ0UsY0ErQkYsT0E3QmdCLEVBQUF1QyxLQUFkLFNBQXdDQyxHQUN0Q0MsRUFBZTNFLElBQU8wRSxFQUFPLFNBQUNFLEdBQzVCRCxFQUFlRSxJQUFPRCxNQUlaLEVBQUE1RSxJQUFkLFNBQ0UwRSxFQUNBckIsR0FFQWIsT0FBT3NDLFFBQVFDLE1BQU0vRSxJQUFJMEUsRUFBTUYsUUFBUyxTQUFBUSxHQUN0QyxJQUFNQyxFQUFpQkQsRUFBT04sRUFBTUYsU0FDOUJJLEVBQWtCL0UsT0FBT3FGLE9BQU8sR0FBSVIsR0FFMUMsUUFBb0JTLElBQWhCRixFQUNGLElBQUssSUFBSW5FLEtBQVk4RCxPQUNXTyxJQUExQkYsRUFBWW5FLEtBQ2Q4RCxFQUFhOUQsR0FBWW1FLEVBQVluRSxJQUszQ3VDLEVBQVN1QixNQUlDLEVBQUFDLElBQWQsU0FBdUNILEcsTUFDckNsQyxPQUFPc0MsUUFBUUMsTUFBTUYsTUFBRyxNQUFJSCxFQUFNRixTQUFVRSxFQUFLLEtBRXJELEVBaENBLEdDSU1VLEVBQXNCQyxTQUFTQyxlQ2FkLHNCRFR2QlgsRUFBZTNFLElBQWlCLElBQUkrQixFQUFlLFNBQUNPLEdBQ2xEOEMsRUFBb0JHLFFBQVVqRCxFQUFRSixrQkFHeENrRCxFQUFvQkksaUJBQWlCLFFBQVMsU0FBQ0MsR0FDN0NkLEVBQWUzRSxJQUFpQixJQUFJK0IsRUFBZSxTQUFDTyxHQUNsREEsRUFBUUosZ0JBQW1CdUQsRUFBR0MsT0FBNEJILFFBQzFELEVBQU8zQixLQUFLekMsRUFBV3dFLG9CQUFxQnJEIiwiZmlsZSI6InBvcHVwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLypcclxuICBUaGluayBvZiB0aGlzIGZpbGUgYXMgYWtpbiB0byB0aGUgd2ViLmNvbmZpZyBmaWxlXHJcbiAgdXNlZCBieSBJSVMgd2ViIGFwcGxpY2F0aW9ucy4gV2Ugc2hvdWxkIHN0b3JlIGFwcGxpY2F0aW9uXHJcbiAgY29uZmlndXJhdGlvbiBzZXR0aW5ncyBoZXJlLCBhbmQgdGhlbiByZWZlcmVuY2UgdGhpc1xyXG4gIG9iamVjdCBmcm9tIG91ciBzY3JpcHRzLiBJZiBhbnkgY2hhbmdlcyBuZWVkIHRvIGJlIG1hZGVcclxuICB0byB0aGVzZSBzZXR0aW5ncyBpbiB0aGUgZnV0dXJlLCB3ZSBzaG91bGQgb25seSBuZWVkIHRvIGNoYW5nZVxyXG4gIGl0IGhlcmUuXHJcbiovXHJcblxyXG5leHBvcnQgY29uc3QgYXBwQ29uZmlnID0ge1xyXG4gIGdlbmVyYWw6IHtcclxuICAgIGV4dGVuc2lvbk5hbWU6ICdzZngnLFxyXG4gICAgZXh0ZW5zaW9uSWQ6ICc1NTUnLFxyXG4gICAgY2hyb21lRXh0ZW5zaW9uUHJvdG9jb2w6ICdjaHJvbWUtZXh0ZW5zaW9uOidcclxuICB9LFxyXG4gIGxpYnJhcmllczoge1xyXG4gICAgUHViU3ViOiB7XHJcbiAgICAgIHBvcnRNZXNzYWdlVHlwZTogJ1B1YlN1YicsXHJcbiAgICAgIHVybFBhdHRlcm46ICdodHRwczovLyovKidcclxuICAgIH1cclxuICB9LFxyXG4gIHNlcnZpY2VzOiB7fSxcclxuICBtb2RlbHM6IHtcclxuICAgIFVzZXJPcHRpb25zOiB7XHJcbiAgICAgIHN0b3JhZ2VLZXk6ICdVc2VyT3B0aW9ucycsXHJcbiAgICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgICAgaXNVcmxSZXdyaXRlck9uOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIGJhY2tncm91bmQ6IHt9LFxyXG4gIGNvbnRlbnQ6IHt9LFxyXG4gIHBvcHVwOiB7fSxcclxuICBvcHRpb25zOiB7fVxyXG59O1xyXG4iLCIvKlxyXG4gIEFueSBldmVudHMgc2VudCB0aHJvdWdoIHRoZSBQdWJTdWIgY2xhc3Mgc2hvdWxkIHVzZVxyXG4gIHVzZSB0aGUgRXZlbnROYW1lcyBlbnVtIGluc3RlYWQgb2YgbWFudWFsbHkgdHlwaW5nXHJcbiAgaW4gdGhlIGV2ZW50IG5hbWUgc3RyaW5nLlxyXG5cclxuICBUaGlzIHNob3VsZCBrZWVwIHVzIGZyb20gY3JlYXRpbmcgdHlwb3MgYW5kIGhvcGVmdWxseSxcclxuICBtYWtlIGl0IGVhc2llciB0byBtYWludGFpbi5cclxuXHJcbiAgV2Ugc2hvdWxkIGFsc28gdHJ5IHRvIGtlZXAgdGhlIGV2ZW50IGRhdGEgc2VudCB3aXRoIFB1YlN1YlxyXG4gIGNvbnNpc3RlbnQgcGVyIGV2ZW50LlxyXG4qL1xyXG5cclxuZXhwb3J0IGVudW0gRXZlbnROYW1lcyB7XHJcbiAgb25Vc2VyT3B0aW9uc1VwZGF0ZSA9ICdvblVzZXJPcHRpb25zVXBkYXRlJ1xyXG59XHJcbiIsIi8qXHJcblRoaXMgcHN1ZWRvLXN0YXRpYyBjbGFzcyBleHBvc2VzIHRoZSBmb2xsb3dpbmcgbWV0aG9kczpcclxuICBcclxuICAtLSAgc3Vic2NyaWJlKGV2ZW50TmFtZTogc3RyaW5nLCBjYWxsYmFjazogY2FsbGJhY2spOiB2b2lkXHJcblxyXG4gICAgICAgIEFsbG93cyB0aGUgdXNlciB0byBzdWJjc3JpYmUgdG8gZXZlbnRzIHRoYXRcclxuICAgICAgICBhcmUgZW1pdHRlZCBsb2NhbGx5IGZyb20gdGhlIGNhbGxpbmcgc2NyaXB0LCBvclxyXG4gICAgICAgIGVtaXR0ZWQgZnJvbSBhIGJhY2tncm91bmQsIGNvbnRlbnQsIHBvcHVwLCBvciBvcHRpb25zXHJcbiAgICAgICAgcGFnZSBzY3JpcHQuXHJcblxyXG4gIC0tICB1bnN1YnNjcmliZShldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IGNhbGxiYWNrKTogdm9pZFxyXG5cclxuICAgICAgICBBbGxvd3MgdGhlIHVzZXIgdG8gdW5zdWJjcmliZSBmcm9tIGFuIGV2ZW50IHRoZXkgd2VyZVxyXG4gICAgICAgIHByZXZpb3VzbHkgc3Vic2NyaWJlIHRvLCBieSBwcm92aWRpbmcgdGhlIGV2ZW50IG5hbWUgYW5kIFxyXG4gICAgICAgIGEgcmVmZXJlbmNlIHRvIHRoZSBjYWxsYmFjayBmdW5jdGlvbiBvcmlnaW5hbGx5IHVzZWQgdG9cclxuICAgICAgICBzdWJzY3JpYmUgdG8gdGhlIGV2ZW50LlxyXG5cclxuICAtLSAgZW1pdChldmVudE5hbWU6IHN0cmluZywgZGF0YTogYW55KTogdm9pZFxyXG5cclxuICAgICAgICBBbGxvd3MgdGhlIHVzZXIgdG8gZW1pdCBldmVudC4gVGhlIGV2ZW50IHdpbGwgYmUgc2VudFxyXG4gICAgICAgIHRvIGFsbCBzdWJzY3JpYmVycywgYm90aCBsb2NhbGx5IHdpdGhpbiB0aGUgY2FsbGluZ1xyXG4gICAgICAgIHNjcmlwLCBhcyB3ZWxsIGFzIGdsb2JhbGx5LCB0byBhbnkgb3RoZXIgc2NyaXB0cyBzdWJzY3JpYmVkXHJcbiAgICAgICAgdG8gdGhlIGV2ZW50IHRocm91Z2ggdGhpcyBQdWJTdWIgY2xhc3MuXHJcbiovXHJcblxyXG5pbXBvcnQgeyBhcHBDb25maWcgfSBmcm9tICcuLi9jb25maWcvYXBwLmNvbmZpZyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUHViU3ViIHtcclxuICBwcml2YXRlIHN0YXRpYyBjYWxsYmFja3NCeUV2ZW50czogeyBbZXZlbnROYW1lOiBzdHJpbmddOiBjYWxsYmFja1tdIH0gPSB7fTtcclxuICBwcml2YXRlIHN0YXRpYyBpc0NvbnRlbnRQYWdlOiBib29sZWFuID0gUHViU3ViLmluaXQoKTtcclxuXHJcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIGluaXQoKTogYm9vbGVhbiB7XHJcbiAgICBjaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoKG1lc3NhZ2U6IFB1YlN1Yk1lc3NhZ2UpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIG1lc3NhZ2UuZXh0ZW5zaW9uTmFtZSAhPT0gYXBwQ29uZmlnLmdlbmVyYWwuZXh0ZW5zaW9uTmFtZSB8fFxyXG4gICAgICAgIG1lc3NhZ2UuZXh0ZW5zaW9uSWQgIT09IGFwcENvbmZpZy5nZW5lcmFsLmV4dGVuc2lvbklkIHx8XHJcbiAgICAgICAgbWVzc2FnZS5tZXNzYWdlVHlwZSAhPT0gYXBwQ29uZmlnLmxpYnJhcmllcy5QdWJTdWIucG9ydE1lc3NhZ2VUeXBlXHJcbiAgICAgICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgUHViU3ViLmVtaXRMb2NhbChtZXNzYWdlLmV2ZW50TmFtZSwgbWVzc2FnZS5kYXRhKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBQdWJTdWIuZ2V0SXNDb250ZW50UGFnZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0SXNDb250ZW50UGFnZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBsb2NhdGlvbi5wcm90b2NvbCAhPT0gYXBwQ29uZmlnLmdlbmVyYWwuY2hyb21lRXh0ZW5zaW9uUHJvdG9jb2w7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIHN1YnNjcmliZShldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IGNhbGxiYWNrKTogdm9pZCB7XHJcbiAgICBQdWJTdWIuY2FsbGJhY2tzQnlFdmVudHNbZXZlbnROYW1lXSA9XHJcbiAgICAgIFB1YlN1Yi5jYWxsYmFja3NCeUV2ZW50c1tldmVudE5hbWVdIHx8IFtdO1xyXG4gICAgUHViU3ViLmNhbGxiYWNrc0J5RXZlbnRzW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIHVuc3Vic2NyaWJlKGV2ZW50TmFtZTogc3RyaW5nLCBjYWxsYmFjazogY2FsbGJhY2spOiB2b2lkIHtcclxuICAgIGNvbnN0IGV2ZW50Q2FsbGJhY2tzID0gUHViU3ViLmNhbGxiYWNrc0J5RXZlbnRzW2V2ZW50TmFtZV07XHJcblxyXG4gICAgaWYgKCFldmVudENhbGxiYWNrcykgcmV0dXJuO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXZlbnRDYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKGV2ZW50Q2FsbGJhY2tzW2ldID09PSBjYWxsYmFjaykge1xyXG4gICAgICAgIGV2ZW50Q2FsbGJhY2tzLnNwbGljZShpLCAxKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBlbWl0KGV2ZW50TmFtZTogc3RyaW5nLCBkYXRhOiBhbnkgPSB7fSk6IHZvaWQge1xyXG4gICAgUHViU3ViLmVtaXRHbG9iYWwoZXZlbnROYW1lLCBkYXRhKTtcclxuICAgIFB1YlN1Yi5lbWl0TG9jYWwoZXZlbnROYW1lLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIGVtaXRMb2NhbChldmVudE5hbWU6IHN0cmluZywgZGF0YTogYW55KSB7XHJcbiAgICBjb25zdCBldmVudENhbGxiYWNrcyA9IFB1YlN1Yi5jYWxsYmFja3NCeUV2ZW50c1tldmVudE5hbWVdO1xyXG5cclxuICAgIGlmICghZXZlbnRDYWxsYmFja3MpIHJldHVybjtcclxuXHJcbiAgICBldmVudENhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjazogY2FsbGJhY2spID0+IHtcclxuICAgICAgY2FsbGJhY2soZGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIGVtaXRHbG9iYWwoZXZlbnROYW1lOiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xyXG4gICAgaWYgKCFQdWJTdWIuaXNDb250ZW50UGFnZSkge1xyXG4gICAgICBQdWJTdWIuc2VuZE1lc3NhZ2VUb0NvbnRlbnQoZXZlbnROYW1lLCBkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBQdWJTdWIuc2VuZE1lc3NhZ2VUb0V4dGVuc2lvbihldmVudE5hbWUsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgc2VuZE1lc3NhZ2VUb0V4dGVuc2lvbihldmVudE5hbWU6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gbmV3IFB1YlN1Yk1lc3NhZ2UoZXZlbnROYW1lLCBkYXRhKTtcclxuICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgc2VuZE1lc3NhZ2VUb0NvbnRlbnQoZXZlbnROYW1lOiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IG5ldyBQdWJTdWJNZXNzYWdlKGV2ZW50TmFtZSwgZGF0YSk7XHJcblxyXG4gICAgY2hyb21lLnRhYnMucXVlcnkoeyB1cmw6IGFwcENvbmZpZy5saWJyYXJpZXMuUHViU3ViLnVybFBhdHRlcm4gfSwgdGFicyA9PiB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFicy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGNocm9tZS50YWJzLnNlbmRNZXNzYWdlKHRhYnNbaV0uaWQsIG1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbnR5cGUgY2FsbGJhY2sgPSAoZGF0YTogYW55KSA9PiBhbnk7XHJcblxyXG5jbGFzcyBQdWJTdWJNZXNzYWdlIHtcclxuICBwdWJsaWMgZXh0ZW5zaW9uTmFtZTogc3RyaW5nO1xyXG4gIHB1YmxpYyBleHRlbnNpb25JZDogc3RyaW5nO1xyXG4gIHB1YmxpYyBtZXNzYWdlVHlwZTogc3RyaW5nO1xyXG4gIHB1YmxpYyBldmVudE5hbWU6IHN0cmluZztcclxuICBwdWJsaWMgZGF0YTogYW55O1xyXG5cclxuICBjb25zdHJ1Y3RvcihldmVudE5hbWU6IHN0cmluZywgZGF0YTogYW55KSB7XHJcbiAgICB0aGlzLmV4dGVuc2lvbk5hbWUgPSBhcHBDb25maWcuZ2VuZXJhbC5leHRlbnNpb25OYW1lO1xyXG4gICAgdGhpcy5leHRlbnNpb25JZCA9IGFwcENvbmZpZy5nZW5lcmFsLmV4dGVuc2lvbklkO1xyXG4gICAgdGhpcy5tZXNzYWdlVHlwZSA9IGFwcENvbmZpZy5saWJyYXJpZXMuUHViU3ViLnBvcnRNZXNzYWdlVHlwZTtcclxuICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xyXG4gICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgYXBwQ29uZmlnIH0gZnJvbSAnLi4vY29uZmlnL2FwcC5jb25maWcnO1xyXG5pbXBvcnQgeyBJU3RvcmFibGUgfSBmcm9tICcuLi9zZXJ2aWNlcy9JU3RvcmFibGUnO1xyXG5cclxuY29uc3Qga2V5ID0gYXBwQ29uZmlnLm1vZGVscy5Vc2VyT3B0aW9ucy5zdG9yYWdlS2V5O1xyXG5jb25zdCBkZWZhdWx0cyA9IGFwcENvbmZpZy5tb2RlbHMuVXNlck9wdGlvbnMuZGVmYXVsdHM7XHJcblxyXG5leHBvcnQgY2xhc3MgVXNlck9wdGlvbnMgaW1wbGVtZW50cyBJU3RvcmFibGUge1xyXG4gIHB1YmxpYyBfX2tleV9fOiBzdHJpbmcgPSBrZXk7XHJcbiAgcHVibGljIGlzVXJsUmV3cml0ZXJPbjogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoaXNVcmxSZXdyaXRlck9uOiBib29sZWFuID0gZGVmYXVsdHMuaXNVcmxSZXdyaXRlck9uKSB7XHJcbiAgICB0aGlzLmlzVXJsUmV3cml0ZXJPbiA9IGlzVXJsUmV3cml0ZXJPbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSVN0b3JhYmxlIH0gZnJvbSAnLi9JU3RvcmFibGUnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0b3JhZ2VTZXJ2aWNlIHtcclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgcHVibGljIHN0YXRpYyBzeW5jPFQgZXh0ZW5kcyBJU3RvcmFibGU+KG1vZGVsOiBUKTogdm9pZCB7XHJcbiAgICBTdG9yYWdlU2VydmljZS5nZXQ8VD4obW9kZWwsICh1cGRhdGVkTW9kZWw6IFQpID0+IHtcclxuICAgICAgU3RvcmFnZVNlcnZpY2Uuc2V0PFQ+KHVwZGF0ZWRNb2RlbCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0PFQgZXh0ZW5kcyBJU3RvcmFibGU+KFxyXG4gICAgbW9kZWw6IFQsXHJcbiAgICBjYWxsYmFjazogY2FsbGJhY2s8VD5cclxuICApOiB2b2lkIHtcclxuICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChtb2RlbC5fX2tleV9fLCByZXN1bHQgPT4ge1xyXG4gICAgICBjb25zdCBzdG9yZWRNb2RlbDogVCA9IHJlc3VsdFttb2RlbC5fX2tleV9fXSBhcyBUO1xyXG4gICAgICBjb25zdCB1cGRhdGVkTW9kZWw6IFQgPSBPYmplY3QuYXNzaWduKHt9LCBtb2RlbCkgYXMgVDtcclxuXHJcbiAgICAgIGlmIChzdG9yZWRNb2RlbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZm9yIChsZXQgcHJvcGVydHkgaW4gdXBkYXRlZE1vZGVsKSB7XHJcbiAgICAgICAgICBpZiAoc3RvcmVkTW9kZWxbcHJvcGVydHldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdXBkYXRlZE1vZGVsW3Byb3BlcnR5XSA9IHN0b3JlZE1vZGVsW3Byb3BlcnR5XTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhbGxiYWNrKHVwZGF0ZWRNb2RlbCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgc2V0PFQgZXh0ZW5kcyBJU3RvcmFibGU+KG1vZGVsOiBUKTogdm9pZCB7XHJcbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoeyBbbW9kZWwuX19rZXlfX106IG1vZGVsIH0pO1xyXG4gIH1cclxufVxyXG5cclxudHlwZSBjYWxsYmFjazxUPiA9ICh1cGRhdGVkTW9kZWw6IFQpID0+IHZvaWQ7XHJcbiIsImltcG9ydCB7IFB1YlN1YiB9IGZyb20gJy4uL2xpYnJhcmllcy9QdWJTdWInO1xyXG5pbXBvcnQgeyBFdmVudE5hbWVzIH0gZnJvbSAnLi4vY29uZmlnL0V2ZW50TmFtZXMnO1xyXG5pbXBvcnQgeyBVc2VyT3B0aW9ucyB9IGZyb20gJy4uL21vZGVscy9Vc2VyT3B0aW9ucyc7XHJcbmltcG9ydCB7IFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvU3RvcmFnZVNlcnZpY2UnO1xyXG5pbXBvcnQgeyBkb21Db25maWcgfSBmcm9tICcuLi9jb25maWcvZG9tLmNvbmZpZyc7XHJcblxyXG5jb25zdCBpc1VybFJld3JpdGVyVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgZG9tQ29uZmlnLnBvcHVwLmlkcy5pc1VybFJld3JpdGVyT25cclxuKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuU3RvcmFnZVNlcnZpY2UuZ2V0PFVzZXJPcHRpb25zPihuZXcgVXNlck9wdGlvbnMoKSwgKG9wdGlvbnM6IFVzZXJPcHRpb25zKSA9PiB7XHJcbiAgaXNVcmxSZXdyaXRlclRvZ2dsZS5jaGVja2VkID0gb3B0aW9ucy5pc1VybFJld3JpdGVyT247XHJcbn0pO1xyXG5cclxuaXNVcmxSZXdyaXRlclRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldjogTW91c2VFdmVudCkgPT4ge1xyXG4gIFN0b3JhZ2VTZXJ2aWNlLmdldDxVc2VyT3B0aW9ucz4obmV3IFVzZXJPcHRpb25zKCksIChvcHRpb25zOiBVc2VyT3B0aW9ucykgPT4ge1xyXG4gICAgb3B0aW9ucy5pc1VybFJld3JpdGVyT24gPSAoZXYudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQ7XHJcbiAgICBQdWJTdWIuZW1pdChFdmVudE5hbWVzLm9uVXNlck9wdGlvbnNVcGRhdGUsIG9wdGlvbnMpO1xyXG4gIH0pO1xyXG59KTtcclxuIiwiLypcclxuICBJbnN0ZWFkIG9mIGhhcmRjb2RpbmcgSFRNTCBjbGFzcyBhbmQgaWQgbmFtZXMgdGhyb3Vnb3V0XHJcbiAgb3VyIGFwcGxpY2F0aW9uLCB3ZSBjYW4ganVzdCBhZGQgdGhlbSB0byB0aGlzIG9iamVjdCwgYW5kXHJcbiAgcmVmZXJlbmNlIHRoaXMgb2JqZWN0IGZyb20gb3VyIHNjcmlwdHMuXHJcblxyXG4gIElmIGFueSBvZiB0aGVzZSBIVE1MIGNsYXNzIG9yIGlkIG5hbWVzIGNoYW5nZSBpbiB0aGUgZnV0dXJlLFxyXG4gIGl0IHdpbGwgYmUgZWFzaWVyIHRvIG9ubHkgaGF2ZSB0byBjaGFuZ2UgdGhlbSBpbiBvbmUgcGxhY2UuXHJcbiovXHJcblxyXG5leHBvcnQgY29uc3QgZG9tQ29uZmlnID0ge1xyXG4gIGNvbnRlbnQ6IHtcclxuICAgIHNmOiB7XHJcbiAgICAgIGNsYXNzZXM6IHt9LFxyXG4gICAgICBpZHM6IHt9XHJcbiAgICB9XHJcbiAgfSxcclxuICBwb3B1cDoge1xyXG4gICAgY2xhc3Nlczoge30sXHJcbiAgICBpZHM6IHtcclxuICAgICAgaXNVcmxSZXdyaXRlck9uOiAnaXMtdXJsLXJld3JpdGVyLW9uJ1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgb3B0aW9uczoge1xyXG4gICAgY2xhc3Nlczoge30sXHJcbiAgICBpZHM6IHt9XHJcbiAgfVxyXG59O1xyXG4iXSwic291cmNlUm9vdCI6IiJ9